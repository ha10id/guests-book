(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{17:function(e,t,a){e.exports=a(42)},22:function(e,t,a){},23:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),o=a.n(c),s=(a(22),a(23),a(2)),u=a.n(s),l=a(4),i=function(e){var t=e.item,a=function(){var a=Object(l.a)(u.a.mark((function a(){return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:e.remove(t);case 1:case"end":return a.stop()}}),a)})));return function(){return a.apply(this,arguments)}}();return r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"item_text"},r.a.createElement("p",null,t.user),r.a.createElement("p",null,t.message)),r.a.createElement("div",{className:"actions"},r.a.createElement("button",{type:"button",className:"link-button",onClick:a},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))},m=a(3),p=a(5),f=function(e){var t=Object(n.useState)({user:"",message:""}),a=Object(p.a)(t,2),c=a[0],o=a[1],s=function(){var t=Object(l.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.save(c),o({user:"",message:""});case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("div",{className:"card"},r.a.createElement("label",{for:"user"},"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f:"),r.a.createElement("input",{id:"user",type:"text",value:c.user,onChange:function(e){return o(Object(m.a)({},c,{user:e.target.value}))}}),r.a.createElement("label",{for:"message"},"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435:"),r.a.createElement("textarea",{id:"message",className:"textarea",type:"text",rows:"7",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442",value:c.message,onChange:function(e){return o(Object(m.a)({},c,{message:e.target.value}))}}),r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{className:"button",onClick:s},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c")))},d=a(16),b=a.n(d).a.create({baseURL:"http://localhost:4000/api/",responseType:"json"});b.interceptors.request.use((function(e){return e.headers.Authorization="Bearer "+window.localStorage.token,e}));var v=function(e){var t=Object(n.useState)(!1),a=Object(p.a)(t,2),c=a[0],o=a[1];return r.a.createElement("div",{className:"btn-container"},r.a.createElement("button",{className:"button",disabled:1===e.pages.current,onClick:e.pageBack},r.a.createElement("span",null,"\u041d\u0430\u0437\u0430\u0434")),r.a.createElement("button",{title:"\u043a\u043b\u0438\u043a\u043d\u0438\u0442\u0435 \u0434\u043b\u044f \u0432\u0432\u043e\u0434\u0430 \u043d\u043e\u043c\u0435\u0440\u0430 \u0432\u0440\u0443\u0447\u043d\u0443\u044e",className:"button",onClick:function(){return o(!0)}},c?r.a.createElement("input",{autoFocus:!0,className:"clean",title:"Enter - \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443, Esc - \u043e\u0442\u043c\u0435\u043d\u0438\u0442\u044c",type:"text",size:5,onKeyDown:function(t){13===t.keyCode?(e.setCurrentPage(parseInt(t.target.value)),o(!1)):27===t.keyCode?o(!1):(t.keyCode<48||t.keyCode>57)&&t.preventDefault()}}):r.a.createElement("span",null,"\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u0430 ",e.pages.current," \u0438\u0437 ",e.pages.total)),r.a.createElement("button",{className:"button",disabled:e.pages.current===e.pages.total,onClick:e.pageForward},r.a.createElement("span",null,"\u0412\u043f\u0435\u0440\u0451\u0434")))},g=function(){var e=Object(n.useState)({data:[]}),t=Object(p.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)({current:1,total:0,limit:3}),s=Object(p.a)(o,2),d=s[0],g=s[1],h=Object(n.useState)(0),E=Object(p.a)(h,2),j=E[0],w=E[1],O={},k=function(){var e=Object(l.a)(u.a.mark((function e(){var t;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t="posts?page=".concat(d.current),b.get(t).then((function(e){var t=e.data;g(Object(m.a)({},d,{total:Math.ceil(parseFloat(t.total/d.limit))})),w(t.total),c({data:t.posts})})).catch((function(e){alert(e.message)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){k()}),[d.current,j]);var y=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O=t,console.log(O),e.next=4,b.post("posts",O).then((function(e){console.log(e),g(Object(m.a)({},d,{current:Math.ceil(parseFloat(e.data.total/d.limit))})),w(e.data.total)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(l.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O=t,console.log(O),e.next=4,b.delete("posts/".concat(O.id)).then((function(e){console.log(e),g(Object(m.a)({},d,{current:Math.ceil(parseFloat(e.data.total/d.limit))})),w(e.data.total)}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(f,{save:y}),a.data.map((function(e,t){return r.a.createElement(i,{key:t,item:e,remove:x})})),r.a.createElement(v,{pages:d,setCurrentPage:function(e){e>d.total&&(e=d.total),g(Object(m.a)({},d,{current:e}))},pageBack:function(){g(Object(m.a)({},d,{current:d.current-1}))},pageForward:function(){return g(Object(m.a)({},d,{current:d.current+1}))}}))};var h=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(g,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(h,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.31b1d612.chunk.js.map